{"version":3,"sources":["../../src/app/components/styleclass/styleclass.ts"],"names":["StyleClass","el","renderer","this","prototype","ngAfterViewInit","_this","eventListener","listen","nativeElement","target","resolveTarget","toggleClass","DomHandler","hasClass","removeClass","addClass","offsetParent","enter","leave","enterActiveClass","animating","style","height","maxHeight","scrollHeight","enterClass","enterListener","enterToClass","hideOnOutsideClick","bindDocumentListener","leaveActiveClass","leaveClass","leaveListener","leaveToClass","unbindDocumentListener","selector","nextElementSibling","previousElementSibling","parentElement","document","querySelector","documentListener","ownerDocument","event","getComputedStyle","getPropertyValue","isSameNode","contains","ngOnDestroy","Directive","args","ElementRef","Renderer2","Input","NgModule","imports","CommonModule","exports","declarations"],"mappings":"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","sourcesContent":["import { CommonModule} from '@angular/common';\r\nimport { NgModule, Directive, ElementRef, Input, Renderer2, OnDestroy, AfterViewInit } from '@angular/core';\r\nimport { DomHandler } from 'primeng/dom';\r\n\r\n@Directive({\r\n    selector: '[pStyleClass]'\r\n})\r\nexport class StyleClass implements AfterViewInit, OnDestroy {\r\n\r\n    constructor(public el: ElementRef, public renderer: Renderer2) {}\r\n\r\n    @Input('pStyleClass') selector: string;\r\n\r\n    @Input() enterClass: string;\r\n\r\n    @Input() enterActiveClass: string;\r\n\r\n    @Input() enterToClass: string;\r\n\r\n    @Input() leaveClass: string;\r\n\r\n    @Input() leaveActiveClass: string;\r\n\r\n    @Input() leaveToClass: string;\r\n\r\n    @Input() hideOnOutsideClick: boolean;\r\n\r\n    @Input() toggleClass: string;\r\n\r\n    eventListener: Function;\r\n\r\n    documentListener: Function;\r\n\r\n    target: HTMLElement;\r\n\r\n    enterListener: Function;\r\n\r\n    leaveListener: Function;\r\n\r\n    animating: boolean;\r\n\r\n    ngAfterViewInit() {\r\n        this.eventListener = this.renderer.listen(this.el.nativeElement, 'click', () => {\r\n            this.target = this.resolveTarget();\r\n\r\n            if (this.toggleClass) {\r\n                if (DomHandler.hasClass(this.target, this.toggleClass))\r\n                    DomHandler.removeClass(this.target, this.toggleClass);\r\n                else\r\n                    DomHandler.addClass(this.target, this.toggleClass);\r\n            }\r\n            else {\r\n                if (this.target.offsetParent === null)\r\n                    this.enter();\r\n                else\r\n                    this.leave();\r\n            }\r\n        });\r\n    }\r\n\r\n    enter() {\r\n        if (this.enterActiveClass) {\r\n            if (!this.animating) {\r\n                this.animating = true;\r\n\r\n                if (this.enterActiveClass === 'slidedown') {\r\n                    this.target.style.height = '0px';\r\n                    DomHandler.removeClass(this.target, 'hidden');\r\n                    this.target.style.maxHeight = this.target.scrollHeight + 'px';\r\n                    DomHandler.addClass(this.target, 'hidden');\r\n                    this.target.style.height = '';\r\n                }\r\n\r\n                DomHandler.addClass(this.target, this.enterActiveClass);\r\n                if (this.enterClass) {\r\n                    DomHandler.removeClass(this.target, this.enterClass);\r\n                }\r\n\r\n                this.enterListener = this.renderer.listen(this.target, 'animationend', () => {\r\n                    DomHandler.removeClass(this.target, this.enterActiveClass);\r\n                    if (this.enterToClass) {\r\n                        DomHandler.addClass(this.target, this.enterToClass);\r\n                    }\r\n                    this.enterListener();\r\n\r\n                    if (this.enterActiveClass === 'slidedown') {\r\n                        this.target.style.maxHeight = '';\r\n                    }\r\n                    this.animating = false;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            if (this.enterClass) {\r\n                DomHandler.removeClass(this.target, this.enterClass);\r\n            }\r\n\r\n            if (this.enterToClass) {\r\n                DomHandler.addClass(this.target, this.enterToClass);\r\n            }\r\n        }\r\n\r\n        if (this.hideOnOutsideClick) {\r\n            this.bindDocumentListener();\r\n        }\r\n    }\r\n\r\n    leave() {\r\n        if (this.leaveActiveClass) {\r\n            if (!this.animating) {\r\n                this.animating = true;\r\n                DomHandler.addClass(this.target, this.leaveActiveClass);\r\n                if (this.leaveClass) {\r\n                    DomHandler.removeClass(this.target, this.leaveClass);\r\n                }\r\n\r\n                this.leaveListener = this.renderer.listen(this.target, 'animationend', () => {\r\n                    DomHandler.removeClass(this.target, this.leaveActiveClass);\r\n                    if (this.leaveToClass) {\r\n                        DomHandler.addClass(this.target, this.leaveToClass);\r\n                    }\r\n                    this.leaveListener();\r\n                    this.animating = false;\r\n                });\r\n            }\r\n        }\r\n        else {\r\n            if (this.leaveClass) {\r\n                DomHandler.removeClass(this.target, this.leaveClass);\r\n            }\r\n\r\n            if (this.leaveToClass) {\r\n                DomHandler.addClass(this.target, this.leaveToClass);\r\n            }\r\n        }\r\n\r\n        if (this.hideOnOutsideClick) {\r\n            this.unbindDocumentListener();\r\n        }\r\n    }\r\n\r\n    resolveTarget() {\r\n        if (this.target) {\r\n            return this.target;\r\n        }\r\n\r\n        switch (this.selector) {\r\n            case '@next':\r\n                return this.el.nativeElement.nextElementSibling;\r\n\r\n            case '@prev':\r\n                return this.el.nativeElement.previousElementSibling;\r\n\r\n            case '@parent':\r\n                return this.el.nativeElement.parentElement;\r\n\r\n            case '@grandparent':\r\n                return this.el.nativeElement.parentElement.parentElement;\r\n\r\n            default:\r\n                return document.querySelector(this.selector);\r\n        }\r\n    }\r\n\r\n    bindDocumentListener() {\r\n        if (!this.documentListener) {\r\n            this.documentListener = this.renderer.listen(this.el.nativeElement.ownerDocument, 'click', event => {\r\n                if (getComputedStyle(this.target).getPropertyValue('position') === 'static') {\r\n                    this.unbindDocumentListener();\r\n                }\r\n                else  if (!this.el.nativeElement.isSameNode(event.target) && !this.el.nativeElement.contains(event.target) && !this.target.contains(event.target)) {\r\n                    this.leave();\r\n                }\r\n            });\r\n        }\r\n    }\r\n\r\n    unbindDocumentListener() {\r\n        if (this.documentListener) {\r\n            this.documentListener();\r\n            this.documentListener = null;\r\n        }\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        this.target = null;\r\n        if (this.eventListener) {\r\n            this.eventListener();\r\n        }\r\n        this.unbindDocumentListener();\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [StyleClass],\r\n    declarations: [StyleClass]\r\n})\r\nexport class StyleClassModule { }"]}