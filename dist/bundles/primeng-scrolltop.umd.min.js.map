{"version":3,"sources":["../../src/app/components/scrolltop/scrolltop.ts"],"names":["ScrollTop","el","cd","this","target","threshold","icon","behavior","showTransitionOptions","hideTransitionOptions","visible","prototype","ngOnInit","bindDocumentScrollListener","bindParentScrollListener","onClick","window","nativeElement","parentElement","scroll","top","onEnter","children","style","zIndex","DomHandler","generateZIndex","checkVisibility","scrollY","markForCheck","_this","scrollListener","scrollTop","addEventListener","getWindowScrollTop","unbindParentScrollListener","removeEventListener","unbindDocumentScrollListener","containerClass","p-scrolltop p-link p-component","p-scrolltop-sticky","ngOnDestroy","Component","args","selector","template","changeDetection","ChangeDetectionStrategy","OnPush","encapsulation","ViewEncapsulation","None","animations","trigger","state","opacity","transition","animate","ElementRef","ChangeDetectorRef","Input","NgModule","imports","CommonModule","exports","declarations"],"mappings":"oiBAmDI,SAAAA,EAAmBC,EAAwBC,GAAxBC,KAAAF,GAAAA,EAAwBE,KAAAD,GAAAA,EAhBlCC,KAAAC,OAAiB,SAEjBD,KAAAE,UAAoB,IAEpBF,KAAAG,KAAe,mBAEfH,KAAAI,SAAmB,SAEnBJ,KAAAK,sBAAgC,OAEhCL,KAAAM,sBAAgC,OAIzCN,KAAAO,SAAmB,SAInBV,EAAAW,UAAAC,SAAA,WACwB,WAAhBT,KAAKC,OACLD,KAAKU,6BACgB,WAAhBV,KAAKC,QACVD,KAAKW,4BAGbd,EAAAW,UAAAI,QAAA,YACwC,WAAhBZ,KAAKC,OAAsBY,OAASb,KAAKF,GAAGgB,cAAcC,eAC/DC,OAAO,CAClBC,IAAK,EACLb,SAAUJ,KAAKI,YAIvBP,EAAAW,UAAAU,QAAA,WACIlB,KAAKF,GAAGgB,cAAcK,SAAS,GAAGC,MAAMC,OAASC,EAAAA,WAAWC,kBAGhE1B,EAAAW,UAAAgB,gBAAA,SAAgBC,GACRA,EAAUzB,KAAKE,UACfF,KAAKO,SAAU,EAEfP,KAAKO,SAAU,EAEnBP,KAAKD,GAAG2B,gBAGZ7B,EAAAW,UAAAG,yBAAA,WAAA,IAAAgB,EAAA3B,KACIA,KAAK4B,eAAiB,WAElBD,EAAKH,gBAAgBG,EAAK7B,GAAGgB,cAAcC,cAAcc,YAG7D7B,KAAKF,GAAGgB,cAAcC,cAAce,iBAAiB,SAAU9B,KAAK4B,iBAGxE/B,EAAAW,UAAAE,2BAAA,WAAA,IAAAiB,EAAA3B,KACIA,KAAK4B,eAAiB,WAClBD,EAAKH,gBAAgBF,EAAAA,WAAWS,uBAGpClB,OAAOiB,iBAAiB,SAAU9B,KAAK4B,iBAG3C/B,EAAAW,UAAAwB,2BAAA,WACQhC,KAAK4B,iBACL5B,KAAKF,GAAGgB,cAAcC,cAAckB,oBAAoB,SAAUjC,KAAK4B,gBACvE5B,KAAK4B,eAAiB,OAI9B/B,EAAAW,UAAA0B,6BAAA,WACQlC,KAAK4B,iBACLf,OAAOoB,oBAAoB,SAAUjC,KAAK4B,gBAC1C5B,KAAK4B,eAAiB,OAI9B/B,EAAAW,UAAA2B,eAAA,WACI,MAAO,CACHC,kCAAkC,EAClCC,qBAAsC,WAAhBrC,KAAKC,SAInCJ,EAAAW,UAAA8B,YAAA,WACwB,WAAhBtC,KAAKC,OACLD,KAAKkC,+BACgB,WAAhBlC,KAAKC,QACVD,KAAKgC,uDAtHhBO,EAAAA,UAASC,KAAA,CAAC,CACPC,SAAU,cACVC,SAAU,iaAMVC,gBAAiBC,EAAAA,wBAAwBC,OACzCC,cAAeC,EAAAA,kBAAkBC,KAEjCC,WAAY,CACRC,EAAAA,QAAQ,YAAa,CACjBC,EAAAA,MAAM,OAAQ/B,EAAAA,MAAM,CAChBgC,QAAS,KAEbD,EAAAA,MAAM,OAAQ/B,EAAAA,MAAM,CAChBgC,QAAS,KAEbC,EAAAA,WAAW,eAAgBC,EAAAA,QAAQ,6BACnCD,EAAAA,WAAW,eAAgBC,EAAAA,QAAQ,mRAzBqDC,EAAAA,kBAAYC,EAAAA,yDA+B3GC,EAAAA,qBAEAA,EAAAA,sBAEAA,EAAAA,yBAEAA,EAAAA,oBAEAA,EAAAA,wBAEAA,EAAAA,qCAEAA,EAAAA,qCAEAA,EAAAA,eAuFL,iCALCC,EAAAA,SAAQlB,KAAA,CAAC,CACNmB,QAAS,CAACC,EAAAA,cACVC,QAAS,CAAChE,GACViE,aAAc,CAACjE","sourcesContent":["import { NgModule, Component, ChangeDetectionStrategy, ViewEncapsulation, Input, OnInit, OnDestroy, ElementRef, ChangeDetectorRef} from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { animate, state, style, transition, trigger } from '@angular/animations';\r\nimport { DomHandler } from 'primeng/dom';\r\n\r\n@Component({\r\n    selector: 'p-scrollTop',\r\n    template: `\r\n        <button  *ngIf=\"visible\" [@animation]=\"{value: 'open', params: {showTransitionParams: showTransitionOptions, hideTransitionParams: hideTransitionOptions}}\" (@animation.start)=\"onEnter()\"\r\n            [ngClass]=\"containerClass()\" (click)=\"onClick()\" [class]=\"styleClass\" [ngStyle]=\"style\" type=\"button\">\r\n            <span [class]=\"icon\" [ngClass]=\"'p-scrolltop-icon'\"></span>\r\n        </button>\r\n    `,\r\n    changeDetection: ChangeDetectionStrategy.OnPush,\r\n    encapsulation: ViewEncapsulation.None,\r\n    styleUrls: ['./scrolltop.css'],\r\n    animations: [\r\n        trigger('animation', [\r\n            state('void', style({\r\n                opacity: 0\r\n            })),\r\n            state('open', style({\r\n                opacity: 1\r\n            })),\r\n            transition('void => open', animate('{{showTransitionParams}}')),\r\n            transition('open => void', animate('{{hideTransitionParams}}')),\r\n        ])\r\n    ]\r\n})\r\nexport class ScrollTop implements OnInit, OnDestroy {\r\n\r\n    @Input() styleClass: string;\r\n\r\n    @Input() style: any;\r\n\r\n    @Input() target: string = \"window\";\r\n    \r\n    @Input() threshold: number = 400;\r\n\r\n    @Input() icon: string = \"pi pi-chevron-up\";\r\n\r\n    @Input() behavior: string = \"smooth\";\r\n    \r\n    @Input() showTransitionOptions: string = '.15s';\r\n\r\n    @Input() hideTransitionOptions: string = '.15s';\r\n\r\n    scrollListener: any;\r\n    \r\n    visible: boolean = false;\r\n\r\n    constructor(public el: ElementRef, private cd: ChangeDetectorRef) { }\r\n\r\n    ngOnInit() {\r\n        if (this.target === 'window')\r\n            this.bindDocumentScrollListener();\r\n        else if (this.target === 'parent')\r\n            this.bindParentScrollListener();\r\n    }\r\n\r\n    onClick() {\r\n        let scrollElement = this.target === 'window' ? window : this.el.nativeElement.parentElement;\r\n         scrollElement.scroll({\r\n            top: 0, \r\n            behavior: this.behavior\r\n        });\r\n    }\r\n\r\n    onEnter() {\r\n        this.el.nativeElement.children[0].style.zIndex = DomHandler.generateZIndex();\r\n    }\r\n\r\n    checkVisibility(scrollY) {\r\n        if (scrollY > this.threshold)\r\n            this.visible = true;\r\n        else\r\n            this.visible = false;\r\n\r\n        this.cd.markForCheck();\r\n    }\r\n\r\n    bindParentScrollListener() {\r\n        this.scrollListener = () => {\r\n\r\n            this.checkVisibility(this.el.nativeElement.parentElement.scrollTop);\r\n        };\r\n        \r\n        this.el.nativeElement.parentElement.addEventListener('scroll', this.scrollListener);\r\n    }\r\n\r\n    bindDocumentScrollListener() {\r\n        this.scrollListener = () => {\r\n            this.checkVisibility(DomHandler.getWindowScrollTop());\r\n        };\r\n        \r\n        window.addEventListener('scroll', this.scrollListener);\r\n    }\r\n\r\n    unbindParentScrollListener() {\r\n        if (this.scrollListener) {\r\n            this.el.nativeElement.parentElement.removeEventListener('scroll', this.scrollListener);\r\n            this.scrollListener = null;\r\n        }\r\n    }\r\n\r\n    unbindDocumentScrollListener() {\r\n        if (this.scrollListener) {\r\n            window.removeEventListener('scroll', this.scrollListener);\r\n            this.scrollListener = null;\r\n        }\r\n    }\r\n\r\n    containerClass() {\r\n        return {\r\n            'p-scrolltop p-link p-component': true,\r\n            'p-scrolltop-sticky': this.target !== 'window'\r\n        };\r\n    }\r\n\r\n    ngOnDestroy() {\r\n        if (this.target === 'window')\r\n            this.unbindDocumentScrollListener();\r\n        else if (this.target === 'parent')\r\n            this.unbindParentScrollListener();\r\n    }\r\n}\r\n\r\n@NgModule({\r\n    imports: [CommonModule],\r\n    exports: [ScrollTop],\r\n    declarations: [ScrollTop]\r\n})\r\nexport class ScrollTopModule { }\r\n"]}